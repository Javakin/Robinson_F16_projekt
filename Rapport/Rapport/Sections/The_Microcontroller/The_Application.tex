\subsection{The Application}
\label{sec:TheApplication}
When the interface for the drivers is set up, the only thing left, is to implement the application. The first part in the application to implement is the app\_update\_current\_task. This tasks responsibility is to update the SSM holding the current position of both pan and tilt. This will be implemented by the use of one api call int the P\&T API.

The next task to implement is the app\_lightshow\_task. This tasks responsibility is to feed positions to the P\&T driver, doing the light-show. This is implemented by sending a new target position to the driver once it has reached the previous target position. 


\begin{figure}[h]
	\centering
	\includegraphics[scale = 0.4] {Billeder/app-kernel-statemachine}
	\caption{The kernel state machine}
	\label{fig:KernelStateMachine}
\end{figure}


The final task to implement is the app\_kernel\_task. This task has to handle the commands and parameter given by the user. First, the commands are separated in to three groups, depending on the number of parameters it requires. After a command is received the kernel waits for the user to enter the parameters needed for the kernel to execute the command. This structure is implemented in a state machine as shown in figure \ref{fig:KernelStateMachine}. 



